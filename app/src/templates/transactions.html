{% extends "base.html" %}
{% block title %}История Транзакций{% endblock %}
{% block content %}
<h2>История Транзакций</h2>
<table>
    <thead>
        <tr>
            <th>Дата</th>
            <th>TransactionID</th>
            <th>TransactionAmt</th>
            <th>ProductCD</th>
            <th>card1</th>
            <th>addr1</th>
            <th>C</th>
            <th>M</th>
            <th>isFraud</th>
        </tr>
    </thead>
    <tbody>
        {% for transaction in predictions %}
        <tr>
            <td>{{ transaction.created_at.strftime('%Y-%m-%d %H:%M:%S') if transaction.created_at else '' }}</td>
            <td>{{ transaction.TransactionID }}</td>
            <td>{{ transaction.TransactionAmt }}</td>
            <td>{{ transaction.ProductCD }}</td>
            <td>{{ transaction.card1 }}</td>
            <td>{{ transaction.addr1 }}</td>
            <td>
                {% if transaction.C %}
                    {{ transaction.C|join(', ') }}
                {% endif %}
            </td>
            <td>
                {% if transaction.M %}
                    {{ transaction.M|join(', ') }}
                {% endif %}
            </td>
            <td>
                {% if transaction.isFraud is not none %}
                    {% if transaction.isFraud == 1 %}
                        <span style="color:red;font-weight:bold;">FRAUD</span>
                    {% else %}
                        <span style="color:green;">OK</span>
                    {% endif %}
                {% else %}
                    -
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}